<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Afiliado - Portal de citas</title>

  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

  <!-- Agrgamos el favicon de la página-->
  <link rel="icon" type="image/png" href="https://www.colpensiones.gov.co/info/rpm/web/portal/imagenes/favicon.ico">

  <!-- Agregamos los estilos de iframe -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Hind', sans-serif;
      
    }
    
    body {
      overflow: hidden;
    }
    
    #contentScriptIframe {
      width: 100%;
      border: none;
      width: 1px;
      min-width: 100%;
      *width: 100%;
      -webkit-overflow-scrolling: touch;
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
    }
  </style>
</head>

<body>
  <!-- Iframe donde contendra el script -->
  <iframe allowfullscreen allow="accelerometer *; ambient-light-sensor *; autoplay *; camera *; clipboard-read *; clipboard-write *; encrypted-media *; fullscreen *; geolocation *; gyroscope *; magnetometer *; microphone *; midi *; payment *; picture-in-picture *; screen-wake-lock *; speaker *; sync-xhr *; usb *; web-share *; vibrate *; vr *" sandbox="allow-downloads allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation" seamless="seamless"
    src="https://script.google.com/macros/s/AKfycbxcutlK-1o-r17Ic1IQd-RQAm8Ww1l-x87qM_2BIaio0AL6tCg/exec" id="contentScriptIframe"></iframe>

  <script>
    // Se define el tamaño inicial
    reportWindowSize();

    // Agregamos el evento que redimenciona el iframe
    window.onresize = reportWindowSize;

    /**
     * Permite ajustar el año del iframe principal
     */
    function reportWindowSize() {

      // Se referencia el iframe
      var mainIframe = document.querySelector("#contentScriptIframe");
      
      // valdiamos si no es un iOS
      if(iOS() == false){
      
        // obtenemos la altura de la ventana
        mainIframe.style.height = (getWindowHeight()) + "px";
      }
      
    }
   
    function iOSversion1() {
      if (/iP(hone|od|ad)/.test(navigator.platform)) {
        // supports iOS 2.0 and later: <http://bit.ly/TJjs1V>
        var v = (navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);
        return [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];
      }
    }
     alert("Versiones: " + iOSversion1())
    function iOSversion() {

    if (iOS) { // <-- Use the one here above
      if (window.indexedDB) { return 'iOS 8 and up'; }
      if (window.SpeechSynthesisUtterance) { return 'iOS 7'; }
      if (window.webkitAudioContext) { return 'iOS 6'; }
      if (window.matchMedia) { return 'iOS 5'; }
      if (window.history && 'pushState' in window.history) { return 'iOS 4'; }
      return 'iOS 3 or earlier';
    }

    return 'Not an iOS device';
  }
    
    /**
     * permite determinar si es un dispositivo iOS
    **/
    function iOS() {
      return [
        'iPad Simulator',
        'iPhone Simulator',
        'iPod Simulator',
        'iPad',
        'iPhone',
        'iPod'
      ].includes(navigator.platform)
      // iPad on iOS 13 detection
      || (navigator.userAgent.includes("Mac") && "ontouchend" in document)
    }

    /**
     * Permite obtener la altura actual
     */
    function getWindowHeight() {

      // variable para obtener el tamaño actual
      var currHeight = 0;

      if (typeof window.innerHeight != 'undefined') {

        // se toma el tamaño de la ventana
        currHeight = window.innerHeight;
      } else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientHeight != 'undefined' && document.documentElement.clientHeight != 0) {

        // se toma el tamaño de la ventana con base al documento
        currHeight = document.documentElement.clientHeight;
      } else {

        // se toma el tamaño de la ventana con base al cuerpo
        currHeight = document.getElementsByTagName('body')[0].clientHeight;
      }

      // se retorna la altura
      return currHeight;
    }
  </script>
</body>

</html>
