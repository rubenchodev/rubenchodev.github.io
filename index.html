<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Afiliado - Portal de citas</title>

  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

  <!-- Agrgamos el favicon de la página-->
  <link rel="icon" type="image/png" href="https://www.colpensiones.gov.co/info/rpm/web/portal/imagenes/favicon.ico">

  <!-- Agregamos los estilos de iframe -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Hind', sans-serif;
      
    }
    
    body {
      overflow: hidden;
    }
    
    #contentScriptIframe {
      width: 100%;
      border: none;
      width: 1px;
      min-width: 100%;
      *width: 100%;
      -webkit-overflow-scrolling: touch;
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
    }
  </style>
</head>

<body>
  <!-- Iframe donde contendra el script -->
  <iframe allowfullscreen allow="accelerometer *; ambient-light-sensor *; autoplay *; camera *; clipboard-read *; clipboard-write *; encrypted-media *; fullscreen *; geolocation *; gyroscope *; magnetometer *; microphone *; midi *; payment *; picture-in-picture *; screen-wake-lock *; speaker *; sync-xhr *; usb *; web-share *; vibrate *; vr *" sandbox="allow-downloads allow-forms allow-modals allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation" seamless="seamless"
    src="https://script.google.com/macros/s/AKfycbxcutlK-1o-r17Ic1IQd-RQAm8Ww1l-x87qM_2BIaio0AL6tCg/exec" id="contentScriptIframe"></iframe>

  <script>
    // Se define el tamaño inicial
    reportWindowSize();

    // Agregamos el evento que redimenciona el iframe
    window.onresize = reportWindowSize;

    /**
     * Permite ajustar el año del iframe principal
     */
    function reportWindowSize() {

      // Se referencia el iframe
      var mainIframe = document.querySelector("#contentScriptIframe");
      
      // obtenemos la versión 
      var iOSVersion = iOS_version();
      
      // valdiamos si no es un iOS
      if(!iOSVersion.Full_Release_Numeric || (iOSVersion.Full_Release_Numeric && Number(iOSVersion.Full_Release_Numeric) > 12.5)){
      
        // obtenemos la altura de la ventana
        mainIframe.style.height = (getWindowHeight()) + "px";
      }
      
    }
   
    function iOS_version() {
      // objeto a retornar
      var ios_info ={};
      
      // se valida si es un iphone
      if(navigator.userAgent.match(/ipad|iphone|ipod/i)){ //if the current device is an iDevice
        ios_info.Major_Release_Numeric=+(navigator.userAgent).match(/OS (\d)?\d_\d(_\d)?/i)[0].split('_')[0].replace("OS ","");
        ios_info.Full_Release_Numeric=+(navigator.userAgent).match(/OS (\d)?\d_\d(_\d)?/i)[0].replace("_",".").replace("_","").replace("OS ","");   //converts versions like 4.3.3 to numeric value 4.33 for ease of numeric comparisons
      }
      
      // validamos si existe la propiedad de la versión
      return(ios_info);
    }
    
    /**
     * permite determinar si es un dispositivo iOS
    **/
    function iOS() {
      return [
        'iPad Simulator',
        'iPhone Simulator',
        'iPod Simulator',
        'iPad',
        'iPhone',
        'iPod'
      ].includes(navigator.platform)
      // iPad on iOS 13 detection
      || (navigator.userAgent.includes("Mac") && "ontouchend" in document)
    }

    /**
     * Permite obtener la altura actual
     */
    function getWindowHeight() {

      // variable para obtener el tamaño actual
      var currHeight = 0;

      if (typeof window.innerHeight != 'undefined') {

        // se toma el tamaño de la ventana
        currHeight = window.innerHeight;
      } else if (typeof document.documentElement != 'undefined' && typeof document.documentElement.clientHeight != 'undefined' && document.documentElement.clientHeight != 0) {

        // se toma el tamaño de la ventana con base al documento
        currHeight = document.documentElement.clientHeight;
      } else {

        // se toma el tamaño de la ventana con base al cuerpo
        currHeight = document.getElementsByTagName('body')[0].clientHeight;
      }

      // se retorna la altura
      return currHeight;
    }
  </script>
</body>

</html>
